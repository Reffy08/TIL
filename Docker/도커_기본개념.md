# 도커의 기본 개념

## 도커란?
도커는 컨테이너라는 경량화된 단위로 애플리케이션을 실행하는 기능을 제공하는 플랫폼으로, 컨테이너를 사용해서 애플리케이션을 더 쉽게 만들고 배포하고 실행할 수 있도록 설계됐다.  

도커는 애플리케이션을 그 종속성과 함께 컨테이너 안에 패키징해서 어디서나 일관되게 실행할 수 있게 해준다.  

도커는 컨테이너를 생성, 배포, 실행하기 위한 도구와 표준을 제공한다.  

<br/>


### 컨테이너
- 컨테이너란 호스트 시스템에서 실행되는 격리된 환경 또는 애플리케이션을 실행하기 위한 경량화된 가상화 환경이다.
- 컨테이너는 도커가 관리하는 독립적인 가상 리소스를 갖는다.(호스트 명, IP 주소, 파일 시스템, 디스크 드라이브)
- 컨테이너는 컨테이너를 실행하는 컴퓨터의 CPU, 메모리, 운영체제를 공유한다.  
- 각각의 컨테이너는 호스트 컴퓨터의 운영체제를 공유하므로 필요한 리소스가 크게 경감된다. 
- 컨테이너는 코드와 모든 종속성을 패키지화하여 응용 프로그램이 한 컴퓨팅 환경에서 다른 컴퓨팅 환경으로 빠르고 안정적으로 실행되도록 하는 소프트웨어의 표준 단위이다.
- 컨테이너는 외부와 독립된 환경을 제공하므로 밀집(메모리가 허용되는 최대한 많은 애플리케이션을 실행)과 격리가 동시에 달성된다.  

<br/>

### 이미지
- 코드, 런타임, 시스템 도구, 시스템 라이브러리 및 설정과 같은 애플리케이션을 실행하는 데 필요한 모든 것을 포함하는 독립적이고 실행 가능한 소프트웨어 패키지다.
- 프로그램을 실행하는 데 필요한 설정이나 종속성을 갖고 있으며, 도커 이미지를 이용해서 컨테이너를 생성한다.  

<br/>

## 도커가 컨테이너를 실행하는 원리

### 빌드, 공유, 실행
빌드 → 공유 → 실행 워크 플로우가 도커의 핵심이다. 복잡한 애플리케이션도 모두 이 과정을 거친다.  

애플리케이션을 컨테이너에서 실행할 수 있도록 패키징하고, 다른 사람이 패키지를 사용할 수 있게 공유한 다음, 이 패키지를 내려받은 사람이 컨테이너를 통해 애플리케이션을 실행한다.

<br/>
<br/>

![도커엔진.png](/Docker/images/docker_engine.png)

### 도커 엔진(Docker Engine)

도커 엔진은 도커의 관리 기능을 맞는 컴포넌트다. 도커 엔진은 컨테이너 기술을 사용하여 애플리케이션을 격리된 환경에서 실행하도록 한다.  

로컬 이미지 캐시를 담당하므로 새로운 이미지가 필요하면 이미지를 내려받고, 기존 이미지가 있다면 전에 내려받은 이미지를 사용한다. 호스트 운영체제와 함께 컨테이너와 가상 네트워크 등 도커 리소스를 만드는 일도 담당한다.  

도커는 개발자가 애플리케이션을 빠르게 개발, 배포 및 실행할 수 있도록 설계되었으며, 소프트웨어를 컨테이너라는 격리된 환경에 패키징하여, 다양한 환경에서도 일관된 동작을 보장한다. 도커 엔진은 항시 동작하는 백그라운드 프로세스다.  


<br/>

### 도커 엔진의 주요 요소
- **도커 데몬(Docker Daemon)**: 도커 데몬은 도커 엔진의 핵심 구성요소로, 컨테이너를 생성, 관리 및 실행하는 역할을 한다. 도커 데몬은 시스템의 백그라운드에서 실행되며, 도커 클라이언트로부터 명령을 받아 처리한다.
- **도커 클라이언트(Docker Client)**: 도커 클라이언트는 도커 데몬과 상호작용하기 위한 명령줄 도구이다. 사용자는 docker 명령을 통해 컨테이너를 생성, 시작, 중지, 삭제 등의 작업을 수행할 수 있다.
- **도커 이미지(Docker Image)**: 도커 이미지는 컨테이너의 템플릿 역할을 하는 불변의 파일 시스템이다. 각 이미지는 애플리케이션 코드, 라이브러리, 종속성 및 런타임 환경을 포함한다. 이미지는 레이어(layer)로 구성되어 있고, 변경 사항이 있을 때마다 새로운 레이어가 추가된다.
- **도커 레지스트리(Docker Registry)**: 도커 레지스트리는 도커 이미지를 저장하고 배포하는 중앙 저장소이다. 도커 허브(Docker Hub)가 대표적인 공개 레지스트리이며, 기업들은 보안 및 관리 목적으로 자체 레지스트리를 운영할 수도 있다.
- **컨테이너(Container)**: 컨테이너는 도커 이미지를 실행한 상태로, 애플리케이션과 그 종속성을 격리된 환경에서 실행한다. 컨테이너는 가볍고 빠르게 시작할 수 있으며, 호스트 시스템의 커널을 공유하므로 오버헤드가 적다.

<br/>

### 도커 API

도커 엔진은 도커 API를 통해 맡은 기능을 수행한다. **도커 API**(Docker API)는 표준 HTTP 기반 REST API다.

도커 엔진의 설정을 수정하면 이 API를 네트워크를 경유해 외부 컴퓨터로부터 호출할 수 없도록 차단(기본 설정)하거나 허용할 수 있다.  

<br/>

### 도커 명령행 인터페이스(Docker command-line interface)

도커 CLI는 도커 API의 클라이언트다. 우리가 docker 명령을 사용할 때 실제로 도커 API를 호출하는 것이 도커 CLI다.

도커 엔진과 상호작용할 수 있는 유일한 방법은 API를 통하는 방법뿐이다. 그리고 API의 접근 허용 범위를 몇 가지로 선택할 수 있다. CLI는 API에 요청을 전달하는 역할을 한다.

도커 엔진은 containerd라는 컴포넌트를 통해 컨테이너를 실제로 관리하는데, containerd는 호스트 운영체제가 제공하는 기능을 통해 컨테이너, 즉 가상 환경을 만든다.

컨테이너에 대해서 저수준의 세부 사항까지 알 필요는 없지만, containered는 CNCF에서 관리하는 오픈 소스 프로젝트이며, 컨테이너는 개방형 컨테이너 이니셔티브(Open Container Initiative, OCI)라는 이름으로 공개된 개방형 표준이라는 점을 알아둘 필요가 있다.

<br/>

### 도커 엔진과 상호작용
도커 엔진과 상호작용할 수 있는 유일한 방법은 API를 통하는 방법뿐이다. 그리고 API의 접근 허용 범위를 몇 가지로 선택할 수 있다. CLI는 API에 요청을 전달하는 역할을 한다.

도커 엔진은 containerd라는 컴포넌트를 통해 컨테이너를 실제로 관리하는데, containerd는 호스트 운영체제가 제공하는 기능을 통해 컨테이너, 즉 가상 환경을 만든다.

컨테이너에 대해서 저수준의 세부 사항까지 알 필요는 없지만, containered는 CNCF에서 관리하는 오픈 소스 프로젝트이며, 컨테이너는 개방형 컨테이너 이니셔티브(Open Container Initiative, OCI)라는 이름으로 공개된 개방형 표준이라는 점을 알아둘 필요가 있다.

<br/>

### 작동 방식
1. **이미지 생성**: 도커 파일(Dockerfile)을 작성하여 애플리케이션 환경을 정의하고, 이를 기반으로 도커 이미지를 생성한다. 도커 파일은 이미지 빌드에 필요한 명령어를 포함한다.
2. **이미지 저장 및 배포**: 생성된 이미지는 도커 레지스트리에 푸시(push)하여 저장할 수 있다. 이를 통해 다른 사용자나 시스템에서도 이미지를 사용할 수 있다.
3. **컨테이너 실행**: 도커 클라이언트를 사용하여 도커 이미지를 기반으로 컨테이너를 실행한다. `docker run` 명령어를 통해 컨테이너를 생성하고, 애플리케이션을 실행할 수 있다.
4. **컨테이너 관리**: 실행 중인 컨테이너는 도커 데몬에 의해 관리된다. `docker ps` 명령어를 사용하여 실행 중인 컨테이너 목록을 확인하고, `docker stop` 명령어로 컨테이너를 중지할 수 있다.
5. **네트워크 및 볼륨**: 도커는 컨테이너 간 통신을 위해 네트워크를 생성하고 관리할 수 있다. 또한, 영구 데이터를 저장하기 위해 볼륨을 사용하여 컨테이너 간 데이터 공유 및 유지가 가능하다. 

<br/>
<br/>